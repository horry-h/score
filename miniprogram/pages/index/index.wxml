<!--index.wxml-->
<view class="container">
  <!-- å¤´éƒ¨åŒºåŸŸ -->
  <view class="header">
    <view class="header-content">
      <view class="header-title">
        <text class="title-icon">ğŸ </text>
        <text class="title-text">éº»å°†è®°åˆ†</text>
      </view>
      <view class="header-avatar" bindtap="goToProfile">
        <image class="avatar-img" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘æˆ¿é—´åŒºåŸŸ -->
  <view class="recent-section">
    <view class="section-title">
      <text class="section-icon">ğŸ•</text>
      <text class="section-text">æœ€è¿‘æˆ¿é—´</text>
    </view>
    
    <view class="recent-room-card" bindtap="enterRecentRoom" wx:if="{{recentRoom}}">
      <view class="room-header">
        <text class="room-id">æˆ¿é—´å·: {{recentRoom.roomId}}</text>
        <view class="status-badge status-active">è¿›è¡Œä¸­</view>
      </view>
      <view class="room-info">
        <view class="room-time">
          <text class="time-icon">ğŸ“…</text>
          <text class="time-text">{{recentRoom.time}}</text>
        </view>
        <view class="room-score">
          <text class="score-icon">ğŸ’°</text>
          <text class="score-text {{recentRoom.score > 0 ? 'positive' : 'negative'}}">{{recentRoom.score > 0 ? '+' : ''}}{{recentRoom.score}}åˆ†</text>
        </view>
      </view>
      <view class="room-stats">
        <text class="stats-icon">ğŸ‘¥</text>
        <text class="stats-text">{{recentRoom.playerCount}}äººå‚ä¸</text>
        <text class="stats-separator">|</text>
        <text class="stats-icon">ğŸ”„</text>
        <text class="stats-text">{{recentRoom.transferCount}}æ¬¡è½¬ç§»</text>
      </view>
      <view class="continue-hint">
        <text class="hint-icon">â–¶ï¸</text>
        <text class="hint-text">ç‚¹å‡»ç»§ç»­æ¸¸æˆ</text>
      </view>
    </view>

    <view class="history-btn-wrapper">
      <button class="history-btn" bindtap="goToHistory">
        <text class="btn-icon">ğŸ“‹</text>
        <text class="btn-text">æŸ¥çœ‹æ‰€æœ‰å†å²æˆ¿é—´</text>
      </button>
    </view>
  </view>

  <!-- åˆ†éš”çº¿ -->
  <view class="divider"></view>

  <!-- å¿«é€Ÿæ“ä½œåŒºåŸŸ -->
  <view class="quick-actions">
    <view class="section-title">
      <text class="section-icon">âš¡</text>
      <text class="section-text">å¿«é€Ÿæ“ä½œ</text>
    </view>
    
    <view class="action-buttons">
      <button class="action-btn primary" bindtap="createRoom">
        <text class="btn-icon">â•</text>
        <text class="btn-text">åˆ›å»ºæˆ¿é—´</text>
      </button>
      <button class="action-btn secondary" bindtap="joinRoom">
        <text class="btn-icon">ğŸ“±</text>
        <text class="btn-text">æ‰«ç åŠ å…¥</text>
      </button>
    </view>
  </view>
</view>
