<!--transfer.wxml-->
<view class="container">
  <view class="header">
    <text class="title">åˆ†æ•°è½¬ç§»</text>
  </view>

  <view class="transfer-hint">
    <text class="icon">ğŸ‘†</text>
    <text>ç‚¹å‡»ç©å®¶å¤´åƒå‘èµ·è½¬ç§»</text>
  </view>

  <view class="players-grid">
    <view 
      wx:for="{{players}}" 
      wx:key="id" 
      class="player-card"
      bindtap="initiateTransfer"
      data-player="{{item}}"
    >
      <view class="player-avatar">
        <image wx:if="{{item.user.avatar_url}}" src="{{item.user.avatar_url}}" class="avatar-image" mode="aspectFill"></image>
        <text wx:else class="icon">ğŸ‘¤</text>
      </view>
      <view class="player-name">{{item.user.nickname}}</view>
      <view class="player-score {{item.current_score < 0 ? 'score-negative' : ''}}">
        {{item.current_score | formatScore}}
      </view>
      <view class="player-hint">ç‚¹å‡»è½¬ç§»</view>
    </view>
  </view>

  <!-- è½¬ç§»ç¡®è®¤åŒºåŸŸ -->
  <view class="transfer-confirm {{showConfirm ? 'show' : ''}}" wx:if="{{showConfirm}}">
    <view class="section-title">
      <text class="icon">âœ…</text>
      <text>ç¡®è®¤è½¬ç§»</text>
    </view>
    
    <view class="transfer-info">
      <view class="transfer-direction">
        <text class="from-player">{{currentUser.nickname}}</text>
        <text class="arrow">â†’</text>
        <text class="to-player">{{selectedPlayer.user.nickname}}</text>
      </view>
      <view class="current-score">
        å½“å‰åˆ†æ•°ï¼š{{selectedPlayer.current_score | formatScore}}
      </view>
    </view>
    
    <view class="input-group">
      <label>è½¬ç§»åˆ†æ•°</label>
      <input type="number" placeholder="è¯·è¾“å…¥åˆ†æ•°" value="{{transferAmount}}" bindinput="onAmountInput" />
    </view>
    
    <view class="confirm-actions">
      <button class="btn" bindtap="confirmTransfer">
        <text class="icon">âœ…</text>
        <text>ç¡®è®¤è½¬ç§»</text>
      </button>
      <button class="btn btn-secondary" bindtap="cancelTransfer">
        <text class="icon">âŒ</text>
        <text>å–æ¶ˆ</text>
      </button>
    </view>
  </view>
</view>
