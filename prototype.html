<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>麻将记分小程序 - 原型设计</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        .container {
            max-width: 375px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
        }

        .page {
            display: none;
            padding: 20px;
            min-height: 100vh;
        }

        .page.active {
            display: block;
        }

        .header {
            text-align: center;
            padding: 20px 0;
            background: linear-gradient(135deg, #07c160, #06ad56);
            color: white;
            margin: -20px -20px 20px -20px;
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
        }

        .btn {
            background: #07c160;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin: 10px 0;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #06ad56;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .avatar-section {
            text-align: center;
            margin: 20px 0;
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #f0f0f0;
            display: inline-block;
            position: relative;
            margin-bottom: 10px;
        }

        .avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .avatar-placeholder {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: #07c160;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .room-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid #f0f0f0;
        }

        .room-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .room-id {
            font-size: 18px;
            font-weight: 600;
            color: #07c160;
        }

        .player-count {
            color: #666;
            font-size: 14px;
        }

        .players-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .player-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 2px solid transparent;
        }

        .player-card.current {
            border-color: #07c160;
            background: #f0f9f4;
        }

        .player-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #07c160;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .player-name {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .player-score {
            font-size: 18px;
            font-weight: 600;
            color: #07c160;
        }

        .score-negative {
            color: #ff4757;
        }

        .transfer-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .transfer-form {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }

        .transfer-form select,
        .transfer-form input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
        }

        .history-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-time {
            color: #666;
            font-size: 12px;
        }

        .settlement-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .settlement-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .settlement-item:last-child {
            border-bottom: none;
        }

        .settlement-amount {
            font-weight: 600;
            font-size: 16px;
        }

        .settlement-amount.positive {
            color: #07c160;
        }

        .settlement-amount.negative {
            color: #ff4757;
        }

        .qr-code {
            width: 200px;
            height: 200px;
            background: #f0f0f0;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            color: #666;
            font-size: 14px;
        }

        .navigation {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 375px;
            background: white;
            border-top: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 5px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s;
        }

        .nav-item.active {
            color: #07c160;
        }

        .nav-item i {
            font-size: 20px;
            margin-bottom: 2px;
        }

        .nav-item span {
            font-size: 12px;
        }

        .floating-btn {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 56px;
            height: 56px;
            background: #07c160;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(7, 193, 96, 0.3);
            z-index: 1000;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px;
            max-width: 300px;
            width: 100%;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            color: #333;
            font-size: 18px;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #666;
        }

        .page-indicator {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            margin: -20px -20px 20px -20px;
            font-size: 14px;
            color: #666;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-active {
            background: #e8f5e8;
            color: #07c160;
        }

        .status-settled {
            background: #fff3cd;
            color: #856404;
        }

        .recent-room-card {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .recent-room-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(7, 193, 96, 0.2);
        }

        .recent-room-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #07c160, #06ad56);
        }

        .section-title {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            font-size: 16px;
            font-weight: 600;
        }

        .section-title i {
            margin-right: 8px;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 页面指示器 -->
        <div class="page-indicator">
            <span id="pageTitle">用户设置页面</span>
        </div>

        <!-- 页面1: 用户设置页面 -->
        <div class="page active" id="page1">
            <div class="header">
                <h1><i class="fas fa-user-cog"></i> 个人信息</h1>
            </div>
            
            <div class="avatar-section">
                <div class="avatar" onclick="changeAvatar()" style="cursor: pointer;">
                    <div class="avatar-placeholder">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div style="color: #666; font-size: 14px; margin-top: 5px;">点击头像更换</div>
            </div>

            <div class="input-group">
                <label>昵称</label>
                <input type="text" placeholder="微信用户1234" value="微信用户1234" id="nicknameInput">
            </div>

            <div class="input-group">
                <label>微信授权</label>
                <button class="btn btn-secondary">
                    <i class="fas fa-weixin"></i> 授权微信信息
                </button>
            </div>

            <div style="margin-top: 30px;">
                <button class="btn" onclick="showPage(2)">
                    <i class="fas fa-home"></i> 返回主页
                </button>
                <button class="btn btn-secondary" onclick="saveUserInfo()">
                    <i class="fas fa-save"></i> 保存信息
                </button>
            </div>
        </div>

        <!-- 页面2: 主页面 -->
        <div class="page" id="page2">
            <div class="header">
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <h1><i class="fas fa-home"></i> 麻将记分</h1>
                    <div class="avatar" onclick="showPage(1)" style="width: 40px; height: 40px; cursor: pointer;">
                        <div class="avatar-placeholder" style="width: 100%; height: 100%; font-size: 16px;">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 最近房间区域 -->
            <div style="margin-bottom: 20px;">
                <h3 class="section-title">
                    <i class="fas fa-clock" style="color: #07c160;"></i>
                    最近房间
                </h3>
                
                <div class="room-card recent-room-card" onclick="showPage(3)" style="cursor: pointer; border: 2px solid #07c160; background: linear-gradient(135deg, #f0f9f4, #ffffff);">
                    <div class="room-header">
                        <span class="room-id">房间号: 888888</span>
                        <span class="status-badge status-active">进行中</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px 0;">
                        <div style="color: #666; font-size: 14px;">
                            <i class="fas fa-calendar"></i> 2024-01-15 14:30
                        </div>
                        <div style="color: #07c160; font-weight: 600;">
                            <i class="fas fa-coins"></i> +150分
                        </div>
                    </div>
                    <div class="player-count">
                        <i class="fas fa-users"></i> 4人参与 | <i class="fas fa-exchange-alt"></i> 8次转移
                    </div>
                    <div style="text-align: center; margin-top: 10px; color: #07c160; font-size: 14px; font-weight: 500;">
                        <i class="fas fa-play"></i> 点击继续游戏
                    </div>
                </div>

                <div style="text-align: center; margin: 10px 0;">
                    <button class="btn btn-secondary" onclick="showPage(9)" style="width: auto; padding: 8px 16px; font-size: 14px;">
                        <i class="fas fa-list"></i> 查看所有历史房间
                    </button>
                </div>
            </div>

            <!-- 分隔线 -->
            <div style="height: 1px; background: #f0f0f0; margin: 20px 0;"></div>

            <!-- 快速操作区域 -->
            <div style="margin-bottom: 20px;">
                <h3 class="section-title">
                    <i class="fas fa-bolt" style="color: #07c160;"></i>
                    快速操作
                </h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                    <button class="btn" onclick="showPage(6)">
                        <i class="fas fa-plus"></i> 创建房间
                    </button>
                    <button class="btn btn-secondary" onclick="showPage(7)">
                        <i class="fas fa-qrcode"></i> 扫码加入
                    </button>
                </div>
            </div>
        </div>

        <!-- 页面3: 房间页面 -->
        <div class="page" id="page3">
            <div class="header">
                <h1><i class="fas fa-door-open"></i> 房间 888888</h1>
            </div>

            <div class="players-grid">
                <div class="player-card current">
                    <div class="player-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="player-name">微信用户1234</div>
                    <div class="player-score">+150</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">当前用户</div>
                </div>
                <div class="player-card" onclick="quickTransfer('玩家2', '-80')">
                    <div class="player-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="player-name">玩家2</div>
                    <div class="player-score score-negative">-80</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">点击转移</div>
                </div>
                <div class="player-card" onclick="quickTransfer('玩家3', '+30')">
                    <div class="player-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="player-name">玩家3</div>
                    <div class="player-score">+30</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">点击转移</div>
                </div>
                <div class="player-card" onclick="quickTransfer('玩家4', '-100')">
                    <div class="player-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="player-name">玩家4</div>
                    <div class="player-score score-negative">-100</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">点击转移</div>
                </div>
            </div>

            <div class="transfer-section">
                <h3><i class="fas fa-exchange-alt"></i> 快速转移</h3>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0; color: #666; font-size: 14px; text-align: center;">
                    <i class="fas fa-hand-pointer"></i> 点击上方玩家头像快速转移分数
                </div>
                <div style="text-align: center;">
                    <button class="btn btn-secondary" onclick="showPage(4)">
                        <i class="fas fa-cog"></i> 详细转移设置
                    </button>
                </div>
            </div>

            <div class="history-section">
                <h3><i class="fas fa-history"></i> 房间流水</h3>
                <div class="history-item">
                    <div>
                        <div>微信用户1234 → 玩家2</div>
                        <div class="history-time">10:30</div>
                    </div>
                    <div style="color: #07c160; font-weight: 600;">+50</div>
                </div>
                <div class="history-item">
                    <div>
                        <div>玩家4 → 玩家3</div>
                        <div class="history-time">10:25</div>
                    </div>
                    <div style="color: #ff4757; font-weight: 600;">-30</div>
                </div>
                <div class="history-item">
                    <div>
                        <div>玩家2 → 微信用户1234</div>
                        <div class="history-time">10:20</div>
                    </div>
                    <div style="color: #07c160; font-weight: 600;">+100</div>
                </div>
            </div>

            <div style="display: flex; gap: 10px; margin: 20px 0;">
                <button class="btn" onclick="showPage(5)" style="flex: 1;">
                    <i class="fas fa-calculator"></i> 结算房间
                </button>
                <button class="btn btn-secondary" onclick="showShareModal()" style="flex: 1;">
                    <i class="fas fa-share"></i> 分享房间
                </button>
            </div>
        </div>

        <!-- 页面4: 分数转移页面 -->
        <div class="page" id="page4">
            <div class="header">
                <h1><i class="fas fa-exchange-alt"></i> 分数转移</h1>
            </div>

            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0; color: #666; font-size: 14px; text-align: center;">
                <i class="fas fa-hand-pointer"></i> 点击玩家头像发起转移
            </div>

            <div class="players-grid">
                <div class="player-card" onclick="initiateTransfer('微信用户1234', '+150')">
                    <div class="player-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="player-name">微信用户1234</div>
                    <div class="player-score">+150</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">点击转移</div>
                </div>
                <div class="player-card" onclick="initiateTransfer('玩家2', '-80')">
                    <div class="player-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="player-name">玩家2</div>
                    <div class="player-score score-negative">-80</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">点击转移</div>
                </div>
                <div class="player-card" onclick="initiateTransfer('玩家3', '+30')">
                    <div class="player-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="player-name">玩家3</div>
                    <div class="player-score">+30</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">点击转移</div>
                </div>
                <div class="player-card" onclick="initiateTransfer('玩家4', '-100')">
                    <div class="player-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="player-name">玩家4</div>
                    <div class="player-score score-negative">-100</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">点击转移</div>
                </div>
            </div>

            <!-- 转移确认区域 -->
            <div class="transfer-section" id="transferConfirm" style="display: none;">
                <h3>确认转移</h3>
                <div style="text-align: center; margin: 20px 0;">
                    <div style="font-size: 18px; margin-bottom: 10px;">
                        <span id="fromPlayer" style="color: #07c160; font-weight: 600;"></span>
                        <i class="fas fa-arrow-right" style="margin: 0 10px; color: #666;"></i>
                        <span id="toPlayer" style="color: #ff4757; font-weight: 600;"></span>
                    </div>
                    <div style="color: #666; font-size: 14px; margin-bottom: 15px;">
                        当前分数：<span id="currentScore"></span>
                    </div>
                </div>
                <div class="input-group">
                    <label>转移分数</label>
                    <input type="number" placeholder="请输入分数" value="50" id="transferAmount">
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn" onclick="confirmTransfer()">
                        <i class="fas fa-check"></i> 确认转移
                    </button>
                    <button class="btn btn-secondary" onclick="cancelTransfer()">
                        <i class="fas fa-times"></i> 取消
                    </button>
                </div>
            </div>
        </div>

        <!-- 页面5: 结算页面 -->
        <div class="page" id="page5">
            <div class="header">
                <h1><i class="fas fa-calculator"></i> 房间结算</h1>
            </div>

            <div class="settlement-section">
                <h3>最终分数</h3>
                <div class="settlement-item">
                    <div>
                        <div>微信用户1234</div>
                        <div style="font-size: 12px; color: #666;">当前分数: +150</div>
                    </div>
                    <div class="settlement-amount positive">+150</div>
                </div>
                <div class="settlement-item">
                    <div>
                        <div>玩家2</div>
                        <div style="font-size: 12px; color: #666;">当前分数: -80</div>
                    </div>
                    <div class="settlement-amount negative">-80</div>
                </div>
                <div class="settlement-item">
                    <div>
                        <div>玩家3</div>
                        <div style="font-size: 12px; color: #666;">当前分数: +30</div>
                    </div>
                    <div class="settlement-amount positive">+30</div>
                </div>
                <div class="settlement-item">
                    <div>
                        <div>玩家4</div>
                        <div style="font-size: 12px; color: #666;">当前分数: -100</div>
                    </div>
                    <div class="settlement-amount negative">-100</div>
                </div>
            </div>

            <div class="settlement-section">
                <h3>转账方案</h3>
                <div class="settlement-item">
                    <div>玩家4 → 微信用户1234</div>
                    <div class="settlement-amount">100分</div>
                </div>
                <div class="settlement-item">
                    <div>玩家2 → 微信用户1234</div>
                    <div class="settlement-amount">50分</div>
                </div>
                <div class="settlement-item">
                    <div>玩家2 → 玩家3</div>
                    <div class="settlement-amount">30分</div>
                </div>
            </div>

            <button class="btn" onclick="showPage(2)">
                <i class="fas fa-check"></i> 确认结算
            </button>
        </div>

        <!-- 页面6: 创建房间页面 -->
        <div class="page" id="page6">
            <div class="header">
                <h1><i class="fas fa-plus"></i> 创建房间</h1>
            </div>

            <div class="room-card">
                <h3>房间设置</h3>
                <div class="input-group">
                    <label>房间名称（可选）</label>
                    <input type="text" placeholder="我的麻将房间" id="roomNameInput">
                </div>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0; color: #666; font-size: 14px;">
                    <i class="fas fa-info-circle"></i> 房间支持多人加入，无人数限制
                </div>
                <button class="btn" onclick="createRoom()">
                    <i class="fas fa-plus"></i> 立即创建房间
                </button>
            </div>
        </div>

        <!-- 页面7: 扫码加入页面 -->
        <div class="page" id="page7">
            <div class="header">
                <h1><i class="fas fa-qrcode"></i> 扫码加入</h1>
            </div>

            <div class="qr-code">
                <div style="text-align: center;">
                    <i class="fas fa-qrcode" style="font-size: 48px; margin-bottom: 10px; color: #07c160;"></i>
                    <div>扫描二维码加入房间</div>
                </div>
            </div>

            <div class="input-group">
                <label>或输入房间号</label>
                <input type="text" placeholder="请输入6位房间号" maxlength="6">
            </div>

            <button class="btn" onclick="showPage(3)">
                <i class="fas fa-sign-in-alt"></i> 加入房间
            </button>
        </div>

        <!-- 页面9: 历史房间列表页面 -->
        <div class="page" id="page9">
            <div class="header">
                <h1><i class="fas fa-history"></i> 历史房间</h1>
            </div>

            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0; color: #666; font-size: 14px; text-align: center;">
                <i class="fas fa-info-circle"></i> 查看所有历史房间的流水和结算信息
            </div>

            <div class="room-card" onclick="showPage(10, '888888')">
                <div class="room-header">
                    <span class="room-id">房间号: 888888</span>
                    <span class="status-badge status-settled">已结算</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px 0;">
                    <div style="color: #666; font-size: 14px;">
                        <i class="fas fa-calendar"></i> 2024-01-15 14:30
                    </div>
                    <div style="color: #07c160; font-weight: 600;">
                        <i class="fas fa-coins"></i> +150分
                    </div>
                </div>
                <div style="color: #666; font-size: 12px;">
                    <i class="fas fa-users"></i> 4人参与 | <i class="fas fa-exchange-alt"></i> 8次转移
                </div>
            </div>

            <div class="room-card" onclick="showPage(10, '777777')">
                <div class="room-header">
                    <span class="room-id">房间号: 777777</span>
                    <span class="status-badge status-settled">已结算</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px 0;">
                    <div style="color: #666; font-size: 14px;">
                        <i class="fas fa-calendar"></i> 2024-01-14 20:15
                    </div>
                    <div style="color: #ff4757; font-weight: 600;">
                        <i class="fas fa-coins"></i> -80分
                    </div>
                </div>
                <div style="color: #666; font-size: 12px;">
                    <i class="fas fa-users"></i> 3人参与 | <i class="fas fa-exchange-alt"></i> 5次转移
                </div>
            </div>

            <div class="room-card" onclick="showPage(10, '666666')">
                <div class="room-header">
                    <span class="room-id">房间号: 666666</span>
                    <span class="status-badge status-settled">已结算</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px 0;">
                    <div style="color: #666; font-size: 14px;">
                        <i class="fas fa-calendar"></i> 2024-01-13 16:45
                    </div>
                    <div style="color: #07c160; font-weight: 600;">
                        <i class="fas fa-coins"></i> +200分
                    </div>
                </div>
                <div style="color: #666; font-size: 12px;">
                    <i class="fas fa-users"></i> 5人参与 | <i class="fas fa-exchange-alt"></i> 12次转移
                </div>
            </div>

            <div class="room-card" onclick="showPage(10, '555555')">
                <div class="room-header">
                    <span class="room-id">房间号: 555555</span>
                    <span class="status-badge status-settled">已结算</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px 0;">
                    <div style="color: #666; font-size: 14px;">
                        <i class="fas fa-calendar"></i> 2024-01-12 19:20
                    </div>
                    <div style="color: #ff4757; font-weight: 600;">
                        <i class="fas fa-coins"></i> -50分
                    </div>
                </div>
                <div style="color: #666; font-size: 12px;">
                    <i class="fas fa-users"></i> 4人参与 | <i class="fas fa-exchange-alt"></i> 6次转移
                </div>
            </div>

            <div style="text-align: center; margin: 30px 0; color: #666; font-size: 14px;">
                <i class="fas fa-chevron-up"></i> 已显示全部历史房间
            </div>
        </div>

        <!-- 页面10: 房间详情页面 -->
        <div class="page" id="page10">
            <div class="header">
                <h1><i class="fas fa-info-circle"></i> 房间详情</h1>
            </div>

            <div class="room-card">
                <div class="room-header">
                    <span class="room-id" id="detailRoomId">房间号: 888888</span>
                    <span class="status-badge status-settled">已结算</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px 0;">
                    <div style="color: #666; font-size: 14px;">
                        <i class="fas fa-calendar"></i> 2024-01-15 14:30 - 16:45
                    </div>
                    <div style="color: #07c160; font-weight: 600;">
                        <i class="fas fa-coins"></i> 最终得分: +150分
                    </div>
                </div>
                <div style="color: #666; font-size: 12px;">
                    <i class="fas fa-users"></i> 4人参与 | <i class="fas fa-exchange-alt"></i> 8次转移 | <i class="fas fa-clock"></i> 2小时15分钟
                </div>
            </div>

            <div class="settlement-section">
                <h3><i class="fas fa-calculator"></i> 最终结算</h3>
                <div class="settlement-item">
                    <div>
                        <div>微信用户1234</div>
                        <div style="font-size: 12px; color: #666;">最终分数: +150</div>
                    </div>
                    <div class="settlement-amount positive">+150</div>
                </div>
                <div class="settlement-item">
                    <div>
                        <div>玩家2</div>
                        <div style="font-size: 12px; color: #666;">最终分数: -80</div>
                    </div>
                    <div class="settlement-amount negative">-80</div>
                </div>
                <div class="settlement-item">
                    <div>
                        <div>玩家3</div>
                        <div style="font-size: 12px; color: #666;">最终分数: +30</div>
                    </div>
                    <div class="settlement-amount positive">+30</div>
                </div>
                <div class="settlement-item">
                    <div>
                        <div>玩家4</div>
                        <div style="font-size: 12px; color: #666;">最终分数: -100</div>
                    </div>
                    <div class="settlement-amount negative">-100</div>
                </div>
            </div>

            <div class="settlement-section">
                <h3><i class="fas fa-money-bill-wave"></i> 转账方案</h3>
                <div class="settlement-item">
                    <div>玩家4 → 微信用户1234</div>
                    <div class="settlement-amount">100分</div>
                </div>
                <div class="settlement-item">
                    <div>玩家2 → 微信用户1234</div>
                    <div class="settlement-amount">50分</div>
                </div>
                <div class="settlement-item">
                    <div>玩家2 → 玩家3</div>
                    <div class="settlement-amount">30分</div>
                </div>
            </div>

            <div class="history-section">
                <h3><i class="fas fa-history"></i> 完整流水记录</h3>
                <div class="history-item">
                    <div>
                        <div>微信用户1234 → 玩家2</div>
                        <div class="history-time">16:30</div>
                    </div>
                    <div style="color: #07c160; font-weight: 600;">+50</div>
                </div>
                <div class="history-item">
                    <div>
                        <div>玩家4 → 玩家3</div>
                        <div class="history-time">16:25</div>
                    </div>
                    <div style="color: #ff4757; font-weight: 600;">-30</div>
                </div>
                <div class="history-item">
                    <div>
                        <div>玩家2 → 微信用户1234</div>
                        <div class="history-time">16:20</div>
                    </div>
                    <div style="color: #07c160; font-weight: 600;">+100</div>
                </div>
                <div class="history-item">
                    <div>
                        <div>玩家3 → 玩家4</div>
                        <div class="history-time">16:15</div>
                    </div>
                    <div style="color: #ff4757; font-weight: 600;">-20</div>
                </div>
                <div class="history-item">
                    <div>
                        <div>玩家4 → 微信用户1234</div>
                        <div class="history-time">16:10</div>
                    </div>
                    <div style="color: #07c160; font-weight: 600;">+80</div>
                </div>
                <div class="history-item">
                    <div>
                        <div>玩家2 → 玩家3</div>
                        <div class="history-time">16:05</div>
                    </div>
                    <div style="color: #ff4757; font-weight: 600;">-40</div>
                </div>
                <div class="history-item">
                    <div>
                        <div>微信用户1234 → 玩家4</div>
                        <div class="history-time">16:00</div>
                    </div>
                    <div style="color: #07c160; font-weight: 600;">+60</div>
                </div>
                <div class="history-item">
                    <div>
                        <div>玩家3 → 玩家2</div>
                        <div class="history-time">15:55</div>
                    </div>
                    <div style="color: #ff4757; font-weight: 600;">-30</div>
                </div>
            </div>

            <button class="btn" onclick="showPage(9)">
                <i class="fas fa-arrow-left"></i> 返回历史房间
            </button>
        </div>

        <!-- 页面8: 房间分享页面 -->
        <div class="page" id="page8">
            <div class="header">
                <h1><i class="fas fa-share"></i> 分享房间</h1>
            </div>

            <div class="room-card">
                <div class="room-header">
                    <span class="room-id" id="shareRoomId">房间号: 888888</span>
                    <span class="status-badge status-active">等待加入</span>
                </div>
                <div class="player-count">
                    <i class="fas fa-users"></i> 1人（无人数限制）
                </div>
            </div>

            <div class="qr-code">
                <div style="text-align: center;">
                    <i class="fas fa-qrcode" style="font-size: 48px; margin-bottom: 10px; color: #07c160;"></i>
                    <div>分享二维码邀请好友</div>
                </div>
            </div>

            <button class="btn">
                <i class="fas fa-share"></i> 分享给好友
            </button>

            <button class="btn btn-secondary">
                <i class="fas fa-copy"></i> 复制房间号
            </button>
        </div>

        <!-- 浮动按钮 -->
        <div class="floating-btn" onclick="showPageSelector()">
            <i class="fas fa-list"></i>
        </div>

        <!-- 分享房间模态框 -->
        <div class="modal" id="shareModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-share"></i> 分享房间</h3>
                    <button class="close-btn" onclick="hideShareModal()">&times;</button>
                </div>
                
                <div class="room-card" style="margin: 20px 0;">
                    <div class="room-header">
                        <span class="room-id" id="shareModalRoomId">房间号: 888888</span>
                        <span class="status-badge status-active">等待加入</span>
                    </div>
                    <div class="player-count">
                        <i class="fas fa-users"></i> 1人（无人数限制）
                    </div>
                </div>

                <div class="qr-code" style="width: 150px; height: 150px; margin: 20px auto;">
                    <div style="text-align: center;">
                        <i class="fas fa-qrcode" style="font-size: 36px; margin-bottom: 8px; color: #07c160;"></i>
                        <div style="font-size: 12px;">分享二维码</div>
                    </div>
                </div>

                <div style="display: flex; gap: 10px; margin: 20px 0;">
                    <button class="btn" onclick="shareToWeChat()" style="flex: 1;">
                        <i class="fas fa-weixin"></i> 分享给好友
                    </button>
                    <button class="btn btn-secondary" onclick="copyRoomId()" style="flex: 1;">
                        <i class="fas fa-copy"></i> 复制房间号
                    </button>
                </div>

                <div style="text-align: center; margin-top: 15px;">
                    <button class="btn btn-secondary" onclick="hideShareModal()" style="width: auto; padding: 8px 20px;">
                        稍后分享
                    </button>
                </div>
            </div>
        </div>

        <!-- 页面选择器模态框 -->
        <div class="modal" id="pageSelector">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>选择页面</h3>
                    <button class="close-btn" onclick="hidePageSelector()">&times;</button>
                </div>
                <div style="display: grid; gap: 10px;">
                    <button class="btn btn-secondary" onclick="showPage(1); hidePageSelector();">1. 个人信息</button>
                    <button class="btn btn-secondary" onclick="showPage(2); hidePageSelector();">2. 主页面</button>
                    <button class="btn btn-secondary" onclick="showPage(3); hidePageSelector();">3. 房间页面</button>
                    <button class="btn btn-secondary" onclick="showPage(4); hidePageSelector();">4. 分数转移</button>
                    <button class="btn btn-secondary" onclick="showPage(5); hidePageSelector();">5. 结算页面</button>
                    <button class="btn btn-secondary" onclick="showPage(6); hidePageSelector();">6. 创建房间</button>
                    <button class="btn btn-secondary" onclick="showPage(7); hidePageSelector();">7. 扫码加入</button>
                    <button class="btn btn-secondary" onclick="showPage(8); hidePageSelector();">8. 房间分享</button>
                    <button class="btn btn-secondary" onclick="showPage(9); hidePageSelector();">9. 历史房间</button>
                    <button class="btn btn-secondary" onclick="showPage(10); hidePageSelector();">10. 房间详情</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const pageTitles = {
            1: '个人信息页面',
            2: '主页面',
            3: '房间页面',
            4: '分数转移页面',
            5: '结算页面',
            6: '创建房间页面',
            7: '扫码加入页面',
            8: '房间分享页面',
            9: '历史房间页面',
            10: '房间详情页面'
        };

        function showPage(pageNumber, roomId = null) {
            // 隐藏所有页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示指定页面
            document.getElementById(`page${pageNumber}`).classList.add('active');
            
            // 更新页面标题
            document.getElementById('pageTitle').textContent = pageTitles[pageNumber];
            
            // 如果是房间详情页面，更新房间号
            if (pageNumber === 10 && roomId) {
                const detailRoomIdElement = document.getElementById('detailRoomId');
                if (detailRoomIdElement) {
                    detailRoomIdElement.textContent = `房间号: ${roomId}`;
                }
            }
        }

        function showPageSelector() {
            document.getElementById('pageSelector').classList.add('active');
        }

        function hidePageSelector() {
            document.getElementById('pageSelector').classList.remove('active');
        }

        function changeAvatar() {
            // 模拟头像更换功能
            alert('头像更换功能\n\n在实际开发中，这里会调用微信小程序的图片选择API，支持从相册选择或拍照');
        }

        function saveUserInfo() {
            const nickname = document.getElementById('nicknameInput').value;
            if (nickname.trim()) {
                alert('用户信息已保存！');
                showPage(2); // 保存后返回主页
            } else {
                alert('请输入昵称');
            }
        }

        function createRoom() {
            const roomName = document.getElementById('roomNameInput').value;
            // 生成随机房间号
            const roomId = Math.floor(100000 + Math.random() * 900000);
            
            // 更新房间分享页面的房间号
            const shareRoomIdElement = document.getElementById('shareRoomId');
            if (shareRoomIdElement) {
                shareRoomIdElement.textContent = `房间号: ${roomId}`;
            }
            
            // 更新分享模态框的房间号
            const shareModalRoomIdElement = document.getElementById('shareModalRoomId');
            if (shareModalRoomIdElement) {
                shareModalRoomIdElement.textContent = `房间号: ${roomId}`;
            }
            
            // 模拟创建房间成功
            alert(`房间创建成功！\n房间号：${roomId}\n${roomName ? `房间名称：${roomName}` : ''}`);
            
            // 直接跳转到房间页面，并显示分享提示
            showPage(3);
            setTimeout(() => {
                showShareModal();
            }, 500);
        }

        // 转移分数相关变量
        let currentTransfer = {
            fromPlayer: '',
            toPlayer: '',
            currentScore: ''
        };

        function initiateTransfer(playerName, currentScore) {
            // 设置转移信息
            currentTransfer.fromPlayer = '微信用户1234'; // 当前用户
            currentTransfer.toPlayer = playerName;
            currentTransfer.currentScore = currentScore;
            
            // 更新确认区域显示
            document.getElementById('fromPlayer').textContent = currentTransfer.fromPlayer;
            document.getElementById('toPlayer').textContent = currentTransfer.toPlayer;
            document.getElementById('currentScore').textContent = currentScore;
            
            // 显示确认区域
            document.getElementById('transferConfirm').style.display = 'block';
            
            // 滚动到确认区域
            document.getElementById('transferConfirm').scrollIntoView({ behavior: 'smooth' });
        }

        function confirmTransfer() {
            const transferAmount = document.getElementById('transferAmount').value;
            if (!transferAmount || transferAmount <= 0) {
                alert('请输入有效的转移分数');
                return;
            }
            
            // 模拟转移成功
            alert(`转移成功！\n${currentTransfer.fromPlayer} → ${currentTransfer.toPlayer}\n转移分数：${transferAmount}`);
            
            // 隐藏确认区域
            document.getElementById('transferConfirm').style.display = 'none';
            
            // 清空输入
            document.getElementById('transferAmount').value = '50';
        }

        function cancelTransfer() {
            // 隐藏确认区域
            document.getElementById('transferConfirm').style.display = 'none';
            
            // 清空输入
            document.getElementById('transferAmount').value = '50';
        }

        function quickTransfer(playerName, currentScore) {
            // 弹出快速转移确认
            const transferAmount = prompt(`向 ${playerName} 转移分数\n当前分数：${currentScore}\n请输入转移分数：`, '50');
            
            if (transferAmount && transferAmount > 0) {
                // 模拟转移成功
                alert(`转移成功！\n微信用户1234 → ${playerName}\n转移分数：${transferAmount}`);
            }
        }

        // 分享房间相关函数
        function showShareModal() {
            document.getElementById('shareModal').classList.add('active');
        }

        function hideShareModal() {
            document.getElementById('shareModal').classList.remove('active');
        }

        function shareToWeChat() {
            // 模拟分享到微信
            alert('分享功能\n\n在实际开发中，这里会调用微信小程序的分享API，将房间信息分享给好友');
            hideShareModal();
        }

        function copyRoomId() {
            // 模拟复制房间号
            const roomId = '888888';
            alert(`房间号已复制：${roomId}\n\n在实际开发中，这里会调用微信小程序的剪贴板API`);
            hideShareModal();
        }

        // 最近房间相关函数
        function updateRecentRoom(roomId, roomData) {
            // 在实际开发中，这里会更新最近房间的数据
            // 包括房间号、时间、分数、参与人数等信息
            console.log('更新最近房间:', roomId, roomData);
        }

        function getRecentRoom() {
            // 在实际开发中，这里会从本地存储或服务器获取最近房间信息
            return {
                roomId: '888888',
                status: '进行中',
                time: '2024-01-15 14:30',
                score: '+150',
                players: 4,
                transfers: 8
            };
        }

        // 点击模态框背景关闭
        document.getElementById('pageSelector').addEventListener('click', function(e) {
            if (e.target === this) {
                hidePageSelector();
            }
        });

        document.getElementById('shareModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideShareModal();
            }
        });

        // 初始化 - 直接进入主页面，让用户能立即使用功能
        showPage(2);
    </script>
</body>
</html>
